## HEAD OF GAME DESIGN: Haven Review

### Executive Summary (3 sentences max)
Haven has a genuinely satisfying core loop with layered dopamine systems that rival Merge Dragons' best moments -- the surge momentum, variable-ratio gem rewards, and chain reactions create authentic "one more merge" pull. The creature collection meta-game (184 creatures across 16 biomes) and cross-chain hybrid recipes add meaningful depth that will carry mid-game players. The biggest risk is a flat mid-game economy: orders lack escalating emotional stakes, and the gap between "I understand merging" and "I'm chasing creatures/hybrids" is where churn will spike.

### Dimension Scores
| Dimension | Score | Evidence |
|-----------|-------|----------|
| Core loop satisfaction | 4.5/5 | Surge momentum system (board.js:15-28) with tuned thresholds (SURGE_PER_MERGE=35, SURGE_ACTIVATE=30) means a single merge nearly triggers surge. Variable-ratio gem multipliers with pity counter (board.js:27-29, 888-917) implement textbook VRR reinforcement. Chain reactions (board.js:939-967) with exponential gem scaling (depth^2*2) create jackpot moments. Critical merge 4% chance for +2 tier jump (board.js:825-831) adds surprise. Near-miss feedback on failed merges (board.js:714-729) and "Almost 5x!" text (board.js:769-771) sustain engagement even on non-optimal plays. |
| Progression depth & meaningful choices | 3.5/5 | 5 base chains x 10 tiers + 4 hybrid chains x 5 tiers = 70 unique items (items.js:5-148). Cross-chain recipes (items.js:143-148) are a genuine discovery mechanic -- flora+wood=living, crystal+stone=arcane, etc. Orders create a "deliver now vs. merge higher" tension through exact-tier matching (orders.js:133-149). However, order difficulty scaling (orders.js:66) is linear and slow (difficultyBoost capped at +5, incrementing every 8 orders). No branching goals or strategic resource allocation -- all chains feel interchangeable except for their order bonuses (orders.js:8-14). |
| Session pacing & energy management | 3/5 | 100 max energy with 2-minute regen (game.js:8-9) provides ~100 spawns per full bar, which is generous for casual play. The clutter tax mechanic (board.js:1043-1082) is clever -- tier-0 items above threshold 8 cost 2 energy per spawn, creating merge pressure. Energy-low warning at 10 (game.js:155-157) is good. However, there is no session-end hook beyond the browser title change (game.js:238-283). No "come back in 30 min for a bonus" prompt. No energy overflow mechanic for returning players. The exit hook only changes document.title -- no push notification, no reward preview. |
| Meta-game engagement | 4/5 | 184 creatures across 16 biomes (creatures.js:24-240) with rarity tiers (common/uncommon/rare/legendary) and biome gating by creature merge tier (hatchery.js:36-44). Passive bonuses from collected creatures (creatures.js:312-329) -- gem_bonus, discovery_chance, energy_regen, xp_bonus, spawn_quality -- create a meaningful "collect more to play better" loop. Companion system (creatures.js:347-571) with 2 slots and active abilities (auto_merge, free_spawn, upgrade_item, etc.) adds tactical depth. 8 rotating weekly events (events.js:11-139) with bronze/silver/gold tiers and exclusive creatures. Battle pass with 40 tiers, graduated XP curve (pass.js:9-14), and power-up rewards. 50 achievements across 12 categories (achievements.js:8-98). This is substantial meta-game infrastructure. |
| Tutorial & onboarding effectiveness | 4.5/5 | Single story screen with one tap to dismiss (tutorial.js:10-14) -- "A storm shattered this island's magic. Merge to restore it." Pre-populated board with carefully positioned starter items (board.js:1241-1256) means the player sees items before learning begins. 5 steps total (tutorial.js:25-69), down from 10 per the comments. Progressive disclosure hides surge bar, power-ups, crystal/creature nodes, shop tab, and achievements during tutorial (tutorial.js:115-141). Post-tutorial breadcrumbs are non-blocking toasts at 0s, 30s, 90s, and 180s (tutorial.js:601-630). Skip button always available (tutorial.js:496-510). The first order is trivially easy -- 1x Branch, wood tier 1 (orders.js:42-57). Debounce reduced from 600ms to 300ms (tutorial.js:480-484) for snappy feel. |

### Critical Findings

1. **[OPPORTUNITY] Surge Momentum is the game's secret weapon -- protect and amplify it**
   - Evidence: SURGE_PER_MERGE=35 with SURGE_ACTIVATE=30 (board.js:22-23) means one merge fills the bar to 35%, and two rapid merges trigger surge. SURGE_DECAY_RATE=8 per second (board.js:24) with 100ms tick interval (board.js:640-653) creates a natural 12-second window. End-of-surge bonus awards floor(mergeCount*1.5)+2 gems (board.js:626-628). This is the "flow state" mechanic that keeps players in sessions.
   - Impact: If tuning drifts (e.g., decay becomes too aggressive), the game loses its core "feel". The surge bar is hidden during tutorial (tutorial.js:123-124), which means some players may never notice it.
   - Recommendation: Add a one-time tooltip when surge first activates post-tutorial ("Merge fast to keep Surge mode active!"). Consider a persistent "best surge streak" counter in stats to make it aspirational. LOW effort (1-2 hours).

2. **[RISK] Mid-game order monotony -- the "deliver or merge" tension plateaus**
   - Evidence: Orders scale difficulty linearly: `difficultyBoost = Math.min(5, Math.floor(ordersCompleted / 8))` (orders.js:66). After 40 orders, difficulty caps. Orders only request from 4 main chains (orders.js:60) -- no hybrid chain orders, no creature chain orders, no multi-step orders. Chain bonuses are static (orders.js:8-14): wood/stone always give +1 star, flora always gives +3 energy.
   - Impact: By Day 7, orders become a rote checklist. The "deliver exact tier" mechanic (orders.js:133-149) is excellent early-game tension, but without escalating stakes or variety, it becomes background noise. Merge Mansion retains through narrative-driven orders; Travel Town through area-unlock gating. Haven has neither.
   - Recommendation: Add "urgent orders" with countdown timers and 2x rewards. Introduce hybrid chain orders after 20 completions. Add "mega orders" requiring 3 items that unlock island zones. MEDIUM effort (1-2 days).

3. **[RISK] No meaningful session-end or return incentive beyond energy refill**
   - Evidence: The exit hook (game.js:238-283) only modifies `document.title` to show "Energy full in Xh Ym!". No return bonus, no "chest waiting when you return", no daily streak mechanic in the core session flow. The daily login system exists but is buried in the Shop tab -- it is never surfaced to the player organically.
   - Impact: Day 1 retention will suffer. Players leave when energy runs out and have no compelling reason to return. Merge Dragons hooks return visits with free dragon orbs and Camp & Chill events. Haven has nothing equivalent at the session level.
   - Recommendation: Implement a "Welcome Back" chest that scales with time away (1-4 hours = small, 4-12h = medium, 12h+ = large). Surface daily login on the board screen, not hidden in Shop. HIGH priority, MEDIUM effort (half day).

4. **[BLOCKER] Weekly events define modifiers but never apply them**
   - Evidence: Events define modifiers like `{ type: 'gem_multiplier', chain: 'crystal', value: 2 }` (events.js:19), `{ type: 'spawn_tier_boost', chain: 'wood', value: 1 }` (events.js:34), and `{ type: 'min_merge_override', value: 2 }` (events.js:98). The Events module exposes `hasModifier()` and `getModifierValue()` (events.js:304-315). However, searching board.js, game.js, and items.js reveals NO calls to `Events.hasModifier()` or `Events.getModifierValue()`. The core gameplay code never reads event modifiers. Event challenge TRACKING works (events.js:246-268) -- it counts merges and spawns correctly -- but the gameplay modifiers advertised to the player ("Crystal merges award 2x gems!", "Wood items spawn 1 tier higher!") are lies.
   - Impact: Players will notice immediately that "Crystal Rush" doesn't actually give 2x gems. This destroys trust in the event system and is the single most likely cause of negative reviews. Players who grind specifically for event bonuses will feel cheated.
   - Recommendation: Wire event modifiers into the game loop. In `board.js:executeMerge()`, check `Events.hasModifier('gem_multiplier', chain)` and multiply gem rewards. In `board.js:spawnItem()`, check for `spawn_tier_boost`. In `board.js:findConnected()` or the merge threshold, check `min_merge_override`. This is a BLOCKER that must be fixed before any public playtest. MEDIUM effort (half day).

5. **[OPPORTUNITY] Cross-chain hybrid discovery is a hidden gem -- surface it earlier**
   - Evidence: 4 hybrid chains (items.js:92-139) created by merging items from two different base chains at the same tier: flora+wood=living, crystal+stone=arcane, stone+wood=shelter, crystal+flora=mystic. The recipe system (items.js:192-211) requires tier 1+ items and produces result at tier-1. This is the deepest strategic mechanic in the game. However, nothing in the tutorial or early-game hints at it. The first cross-chain recipe requires two different tier-1 items from specific chains, which could take 5-10 minutes of undirected play.
   - Impact: Many casual players will churn before discovering hybrids. This is the "aha!" moment that separates Haven from simpler merge games.
   - Recommendation: At 5 minutes post-tutorial (or after 3 orders completed), show a toast: "Try merging a Branch with a Sprout -- something special happens!" Consider placing a wood tier-1 and flora tier-1 adjacent on the starter board. LOW effort (1-2 hours).

6. **[OPPORTUNITY] Pity counter for gem multipliers is excellent -- extend the pattern**
   - Evidence: `mergesSinceBonus` counter guarantees a 2x multiplier every 12 merges and 3x every 24 merges (board.js:27-29, 892-896). This prevents frustration streaks while maintaining variable-ratio excitement.
   - Impact: Currently only applies to gem multipliers. The same pattern could solve discovery frustration in the creature system, where pure RNG (hatchery.js:47-56) can produce long dry spells.
   - Recommendation: Add a creature discovery pity counter: if no creature discovered after N creature-chain merges at eligible tiers, guarantee one. LOW effort (1-2 hours).

7. **[RISK] Companion system requires rare/legendary creatures but has no pity path**
   - Evidence: Only rare and legendary creatures can be companions (creatures.js:497-503). Discovery requires creature chain merges at tier 3+ for rare access (hatchery.js:24-33), with a base 50% chance at tier 3 (hatchery.js:47-56). Even when discovery fires, rare is only 12% weight vs 60% common (hatchery.js:9-14). A player could easily play for 2+ hours before discovering a rare creature.
   - Impact: The companion bar (2 slots, visible on the board) will sit empty for the entire early game, creating a "this feature isn't for me yet" feeling that suppresses engagement with the creature system.
   - Recommendation: Guarantee one rare creature discovery within the first 10 creature-chain merges. Or award a starter companion as a Day 2 daily login reward. LOW effort (1-2 hours).

8. **[OPPORTUNITY] The "Almost 5x!" and near-miss feedback system deserves expansion**
   - Evidence: "Almost 5x!" floating text at 4 items (board.js:769-771). Near-miss pulse on adjacent matching items after spawn (board.js:1216-1226). Near-miss on failed merge (board.js:714-729). "Almost chain..." on almost-chain-reaction (board.js:959-962). This near-miss system is behaviorally excellent -- it creates the "so close!" feeling that drives retry behavior.
   - Impact: Already strong. Could be extended to orders ("1 away!" badge exists at orders.js:297-299 -- good) and events (no "almost bronze!" equivalent exists).
   - Recommendation: Add near-completion indicators for event challenges: at 80% progress, pulse the event banner. FREE (already have the infrastructure at events.js:270-286, just needs a lower threshold).

### Trade-off Flags
- **Game Design vs. Engineering**: The event modifier BLOCKER (Finding #4) requires coordination with whatever system owns the merge/spawn hot path. Wiring events into `executeMerge()` adds conditional branches to the most performance-sensitive function.
- **Game Design vs. Monetization**: Recommending a guaranteed rare creature early (Finding #7) may conflict with monetization strategy if rare creatures are meant to be purchase incentives. However, giving one "taste" typically increases conversion, not reduces it.
- **Game Design vs. UX/Art**: The post-tutorial toast suggestions (Findings #1, #5) add more text overlays to an already toast-heavy UI. Need UX review to ensure toast fatigue doesn't set in. Current toast system replaces existing toasts (board.js:1412-1413), so there is already a collision risk.

### Go/No-Go Signal
**AMBER** -- The core loop is genuinely excellent and the meta-game has impressive depth for a prototype, but the event modifier disconnect (Finding #4) is a trust-breaking bug that must be fixed before any player-facing test. Fix the event wiring, add a return incentive, and this moves to GREEN.
